# From https://docs.github.com/en/actions/learn-github-actions/contexts#example-usage-of-the-env-context
name: Nuget Example
on: push
jobs:
  test:
    runs-on: windows-latest
    # From https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-nuget-registry
    steps:
      - run: dotnet nuget add source --username USERNAME --password ${{ secrets.GITHUB_TOKEN }} --store-password-in-clear-text --name github "https://nuget.pkg.github.com/NAMESPACE/index.json"
      - run: dotnet new console --name GmzwingeNugetExample
      - run: dotnet pack --configuration Release
      - run: dotnet nuget push "bin/Release/GmzwingeNugetExample.1.0.0.nupkg"  --api-key YOUR_GITHUB_PAT --source "github"
      - run: dotnet restore
      
